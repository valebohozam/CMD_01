<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProBuild ¬∑ Administraci√≥n de Proyectos (CRUD)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --primary-color: #ff6b35;
      --secondary-color: #1a1a2e;
      --accent-color: #0f4c75;
      --text-light: #ffffff;
      --text-dark: #2c3e50;
      --background-light: #f8f9fa;
      --gradient-primary: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
      --gradient-secondary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      --shadow-primary: 0 20px 60px rgba(255, 107, 53, 0.3);
      --shadow-secondary: 0 10px 30px rgba(0, 0, 0, 0.2);
      --card-bg: #ffffff;
      --border-color: #e9ecef;
      --success-color: #28a745;
      --warning-color: #ffc107;
      --danger-color: #dc3545;
      --info-color: #17a2b8;
    }

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      color: var(--text-dark);
      background: var(--background-light);
    }

    /* SIDEBAR */
    .sidebar {
      position: fixed; top: 0; left: 0; width: 280px; height: 100vh;
      background: var(--gradient-secondary); padding: 2rem 0; z-index: 1000; transition: all .3s ease;
    }
    .sidebar-header { padding: 0 2rem; margin-bottom: 2rem; }
    .sidebar-logo {
      font-size: 1.8rem; font-weight: 800; color: var(--text-light); text-decoration: none;
      background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .sidebar-nav { list-style: none; }
    .nav-item { margin-bottom: .5rem; }
    .nav-link { display:flex; align-items:center; padding: 1rem 2rem; color: rgba(255,255,255,.8); text-decoration:none; transition: all .3s ease; position: relative; }
    .nav-link:hover, .nav-link.active { color: var(--text-light); background: rgba(255,107,53,.1); }
    .nav-link.active::before { content:''; position:absolute; left:0; top:0; bottom:0; width:4px; background: var(--gradient-primary); }
    .nav-icon { margin-right: 1rem; font-size: 1.2rem; }

    /* MAIN */
    .main-content { margin-left: 280px; padding: 2rem; min-height: 100vh; }
    .top-bar { background: var(--card-bg); border-radius: 15px; padding: 1.5rem 2rem; margin-bottom: 2rem; box-shadow: var(--shadow-secondary); display:flex; justify-content:space-between; align-items:center; }
    .page-title { font-size: 1.8rem; font-weight: 700; }
    .user-info { display:flex; align-items:center; gap:1rem; }
    .user-avatar { width:40px; height:40px; border-radius:50%; background: var(--gradient-primary); display:flex; align-items:center; justify-content:center; color:var(--text-light); font-weight:600; }

    /* TOOLBAR */
    .toolbar { display:flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem; }
    .btn { padding: .75rem 1.2rem; border:none; border-radius: 12px; font-weight: 600; cursor:pointer; display:inline-flex; align-items:center; gap:.5rem; transition: transform .15s ease, box-shadow .15s ease; }
    .btn:active { transform: translateY(1px); }
    .btn-primary { background: var(--gradient-primary); color: var(--text-light); box-shadow: var(--shadow-primary); }
    .btn-outline { background: #fff; border: 2px solid var(--border-color); color: var(--text-dark); }
    .btn-danger { background: rgba(220,53,69,.15); color: var(--danger-color); }

    .input, select { padding: .8rem 1rem; border: 1px solid var(--border-color); border-radius: 12px; outline:none; min-width: 220px; }
    .input:focus, select:focus { border-color: #cfd4da; box-shadow: 0 0 0 4px rgba(15,76,117,.05); }

    /* TABLE CARD */
    .card { background: var(--card-bg); border-radius: 16px; box-shadow: var(--shadow-secondary); padding: 1rem; overflow:hidden; }
    .card-header { display:flex; justify-content:space-between; align-items:center; padding: .75rem 1rem 1rem; border-bottom: 1px solid var(--border-color); }
    .card-title { font-size: 1.2rem; font-weight: 700; }

    table { width:100%; border-collapse: collapse; }
    th, td { padding: 1rem; border-bottom: 1px solid var(--border-color); text-align: left; }
    th { background: var(--background-light); font-size:.9rem; text-transform: uppercase; letter-spacing:.5px; }
    tr:hover { background: rgba(255,107,53,.04); }

    .status-badge { padding:.45rem .8rem; border-radius: 999px; font-size:.78rem; font-weight:700; letter-spacing:.4px; text-transform:uppercase; }
    .status-active { background: rgba(40,167,69,.15); color: var(--success-color); }
    .status-pending { background: rgba(255,193,7,.15); color: var(--warning-color); }
    .status-completed { background: rgba(23,162,184,.15); color: var(--info-color); }
    .status-inactive { background: rgba(220,53,69,.15); color: var(--danger-color); }

    .actions { display:flex; gap:.4rem; }
    .icon-btn { padding:.5rem .6rem; border:none; border-radius:10px; cursor:pointer; display:grid; place-items:center; transition: transform .15s ease; }
    .icon-btn:hover { transform: translateY(-1px); }
    .icon-edit { background: rgba(23,162,184,.15); color: var(--info-color); }
    .icon-del { background: rgba(220,53,69,.15); color: var(--danger-color); }

    /* MODAL */
    .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; padding: 1rem; z-index: 2000; }
    .modal { width: 100%; max-width: 680px; background: #fff; border-radius: 18px; box-shadow: 0 25px 80px rgba(0,0,0,.25); overflow: hidden; transform: translateY(10px); opacity: 0; transition: opacity .2s ease, transform .2s ease; }
    .modal.open { transform: translateY(0); opacity: 1; }
    .modal-header { padding: 1.2rem 1.2rem .6rem; border-bottom: 1px solid var(--border-color); display:flex; align-items:center; justify-content:space-between; }
    .modal-title { font-size: 1.2rem; font-weight: 800; }
    .modal-body { padding: 1rem 1.2rem 1.2rem; }
    .modal-grid { display:grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
    .modal-actions { display:flex; justify-content:flex-end; gap:.6rem; padding: 1rem 1.2rem 1.2rem; border-top: 1px solid var(--border-color); background: #fafbfc; }
    .field { display:flex; flex-direction:column; gap:.4rem; }
    .label { font-size:.9rem; font-weight:600; }

    /* TOASTS */
    .toast-container { position: fixed; right: 20px; bottom: 20px; display:flex; flex-direction:column; gap:.6rem; z-index: 3000; }
    .toast { background:#fff; border-left: 6px solid var(--primary-color); padding: .9rem 1rem; border-radius: 12px; box-shadow: 0 15px 40px rgba(0,0,0,.12); min-width: 260px; display:flex; align-items:flex-start; gap:.8rem; animation: slideUp .25s ease; }
    .toast.success { border-left-color: var(--success-color); }
    .toast.info { border-left-color: var(--info-color); }
    .toast.warn { border-left-color: var(--warning-color); }
    .toast.error { border-left-color: var(--danger-color); }
    .toast .title { font-weight: 800; }
    .toast .msg { font-size:.92rem; color:#475569; }
    @keyframes slideUp { from{ transform: translateY(8px); opacity:.0 } to{ transform: translateY(0); opacity:1 } }

    /* RESPONSIVE */
    @media (max-width: 1040px) {
      .main-content { margin-left: 0; padding: 1rem; }
      .sidebar { transform: translateX(-100%); }
      .sidebar.active { transform: translateX(0); }
      .modal-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header"><a href="#" class="sidebar-logo">ProBuild</a></div>
    <ul class="sidebar-nav">
      <li class="nav-item"><a class="nav-link " href="#"><span class="nav-icon">üìä</span> Dashboard</a></li>
      <li class="nav-item"><a class="nav-link active" href="#"><span class="nav-icon">üèóÔ∏è</span> Proyectos</a></li>
      <li class="nav-item"><a class="nav-link" href="#"><span class="nav-icon">üë•</span> Usuarios</a></li>
      <li class="nav-item"><a class="nav-link" href="#"><span class="nav-icon">üìÖ</span> Calendario</a></li>
      <li class="nav-item"><a class="nav-link" href="#"><span class="nav-icon">üí∞</span> Finanzas</a></li>
      <li class="nav-item"><a class="nav-link" href="#"><span class="nav-icon">üìã</span> Reportes</a></li>
      <li class="nav-item"><a class="nav-link" href="#"><span class="nav-icon">‚öôÔ∏è</span> Configuraci√≥n</a></li>
      <li class="nav-item"><a class="nav-link" href="#"><span class="nav-icon">üö™</span> Salir</a></li>
    </ul>
  </aside>

  <!-- Main -->
  <main class="main-content">
    <div class="top-bar">
      <h1 class="page-title">Administraci√≥n de Proyectos</h1>
      <div class="user-info">
        <div class="user-avatar">BN</div>
        <div>
          <div style="font-weight:600">Benjam√≠n Novoa</div>
          <div style="font-size:.85rem;color:#6c757d">Administrador</div>
        </div>
      </div>
    </div>

    <!-- Toolbar -->
    <div class="toolbar">
      <button class="btn btn-primary" id="btnNuevo">‚ûï Nuevo Proyecto</button>
      <input class="input" id="inputSearch" placeholder="Buscar por nombre, c√≥digo o cliente..." />
      <select id="filterEstado">
        <option value="">Todos los estados</option>
        <option value="EN_PROGRESO">En Progreso</option>
        <option value="PENDIENTE">Pendiente</option>
        <option value="COMPLETADO">Completado</option>
        <option value="CANCELADO">Cancelado</option>
      </select>
      <select id="sortBy">
        <option value="-createdAt">M√°s reciente</option>
        <option value="nombre">Nombre (A‚ÜíZ)</option>
        <option value="cliente">Cliente (A‚ÜíZ)</option>
        <option value="progreso">Progreso</option>
        <option value="presupuesto">Presupuesto</option>
        <option value="fechaLimite">Fecha L√≠mite</option>
      </select>
      <button class="btn btn-outline" id="btnExport">‚¨áÔ∏è Exportar JSON</button>
      <button class="btn btn-outline" id="btnImport">‚¨ÜÔ∏è Importar JSON</button>
      <input type="file" id="fileImport" accept="application/json" style="display:none" />
    </div>

    <!-- Table Card -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">Listado de Proyectos</div>
        <div style="font-size:.9rem;color:#6c757d"><span id="count"></span></div>
      </div>
      <div style="overflow-x:auto">
        <table id="tabla">
          <thead>
            <tr>
              <th>Proyecto</th>
              <th>C√≥digo</th>
              <th>Cliente</th>
              <th>Progreso</th>
              <th>Estado</th>
              <th>Fecha L√≠mite</th>
              <th>Presupuesto</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Modal Crear/Editar -->
  <div class="modal-backdrop" id="backdrop">
    <div class="modal" id="modal">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle">Nuevo Proyecto</div>
        <button class="icon-btn" id="btnClose" title="Cerrar" style="background:transparent">‚úñ</button>
      </div>
      <form id="formProyecto">
        <div class="modal-body">
          <div class="modal-grid">
            <div class="field">
              <label class="label">Nombre del Proyecto</label>
              <input class="input" name="nombre" required placeholder="Ej: Torre Empresarial Norte" />
            </div>
            <div class="field">
              <label class="label">C√≥digo</label>
              <input class="input" name="codigo" required placeholder="Ej: TEN-2024-001" />
            </div>
            <div class="field">
              <label class="label">Cliente</label>
              <input class="input" name="cliente" required placeholder="Ej: Constructora Moderna S.A." />
            </div>
            <div class="field">
              <label class="label">Estado</label>
              <select name="estado" required>
                <option value="EN_PROGRESO">En Progreso</option>
                <option value="PENDIENTE">Pendiente</option>
                <option value="COMPLETADO">Completado</option>
                <option value="CANCELADO">Cancelado</option>
              </select>
            </div>
            <div class="field">
              <label class="label">Progreso (%)</label>
              <input class="input" name="progreso" type="number" min="0" max="100" step="1" value="0" />
            </div>
            <div class="field">
              <label class="label">Presupuesto (USD)</label>
              <input class="input" name="presupuesto" type="number" min="0" step="0.01" value="0" />
            </div>
            <div class="field" style="grid-column: 1 / -1;">
              <label class="label">Fecha L√≠mite</label>
              <input class="input" name="fechaLimite" type="date" required />
            </div>
            <div class="field" style="grid-column: 1 / -1;">
              <label class="label">Descripci√≥n</label>
              <textarea class="input" name="descripcion" rows="3" placeholder="Resumen del alcance, ubicaciones, hitos, etc."></textarea>
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-outline" id="btnCancel">Cancelar</button>
          <button type="submit" class="btn btn-primary" id="btnSubmit">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toasts -->
  <div class="toast-container" id="toasts"></div>

  <script>
    // ===== UTIL =====
    const qs = (s, el=document) => el.querySelector(s);
    const qsa = (s, el=document) => [...el.querySelectorAll(s)];

    const Toast = {
      show(msg, type='info', title='Aviso') {
        const wrap = qs('#toasts');
        const el = document.createElement('div');
        el.className = `toast ${type}`;
        el.innerHTML = `<div><div class="title">${title}</div><div class="msg">${msg}</div></div>`;
        wrap.appendChild(el);
        setTimeout(() => { el.style.opacity = .9; }, 50);
        setTimeout(() => { el.style.opacity = 0; el.style.transform = 'translateY(8px)'; setTimeout(()=> el.remove(), 250); }, 3500);
      }
    }

    // ===== STORE (localStorage mock, f√°cil de reemplazar por API) =====
    const KEY = 'probuild_projects';
    const Store = {
      all() { return JSON.parse(localStorage.getItem(KEY) || '[]'); },
      save(list) { localStorage.setItem(KEY, JSON.stringify(list)); },
      upsert(p) {
        const list = this.all();
        const idx = list.findIndex(x => x.id === p.id);
        if (idx >= 0) list[idx] = p; else list.unshift(p);
        this.save(list);
      },
      remove(id) {
        const list = this.all().filter(x => x.id !== id);
        this.save(list);
      },
      seedIfEmpty() {
        if (this.all().length) return;
        const now = Date.now();
        const sample = [
          { id: crypto.randomUUID(), nombre:'Torre Empresarial Norte', codigo:'TEN-2024-001', cliente:'Constructora Moderna S.A.', progreso:75, estado:'EN_PROGRESO', fechaLimite:'2024-11-15', presupuesto:850000, descripcion:'Oficinas y comercio ‚Äì Etapa 2', createdAt: now-1000 },
          { id: crypto.randomUUID(), nombre:'Residencial Los Pinos', codigo:'RLP-2024-002', cliente:'Inmobiliaria Central', progreso:45, estado:'PENDIENTE', fechaLimite:'2024-12-28', presupuesto:1200000, descripcion:'Conjunto residencial 6 torres', createdAt: now-2000 },
          { id: crypto.randomUUID(), nombre:'Centro Comercial Plaza', codigo:'CCP-2024-003', cliente:'Desarrollos Urbanos', progreso:100, estado:'COMPLETADO', fechaLimite:'2024-09-30', presupuesto:2150000, descripcion:'Remodelaci√≥n y ampliaci√≥n', createdAt: now-3000 },
          { id: crypto.randomUUID(), nombre:'Complejo Habitacional Sur', codigo:'CHS-2024-004', cliente:'Vivienda Social Corp.', progreso:30, estado:'EN_PROGRESO', fechaLimite:'2025-02-15', presupuesto:3500000, descripcion:'Vivienda VIS ‚Äì 500 aptos', createdAt: now-4000 },
          { id: crypto.randomUUID(), nombre:'Oficinas Corporativas Este', codigo:'OCE-2024-005', cliente:'TechCorp Solutions', progreso:90, estado:'EN_PROGRESO', fechaLimite:'2024-10-08', presupuesto:975000, descripcion:'Sede corporativa 12 pisos', createdAt: now-5000 },
        ];
        sample.forEach(x => this.upsert(x));
      }
    };

    // ===== STATE =====
    const state = {
      editingId: null,
      search: '',
      filtroEstado: '',
      sort: '-createdAt'
    };

    // ===== RENDER =====
    function badge(estado) {
      const map = { EN_PROGRESO:'status-active', PENDIENTE:'status-pending', COMPLETADO:'status-completed', CANCELADO:'status-inactive' };
      const label = { EN_PROGRESO:'En Progreso', PENDIENTE:'Pendiente', COMPLETADO:'Completado', CANCELADO:'Cancelado' };
      return `<span class="status-badge ${map[estado]}">${label[estado] || estado}</span>`;
    }

    function formatMoney(v){ return Intl.NumberFormat('en-US',{style:'currency', currency:'USD', maximumFractionDigits:0}).format(Number(v||0)); }
    function formatDate(iso){ if(!iso) return ''; const d=new Date(iso); return d.toLocaleDateString('es-CO', { day:'2-digit', month:'short', year:'numeric' }); }

    function applyFilters(list){
      let out = [...list];
      const s = state.search.trim().toLowerCase();
      if (s) out = out.filter(p => `${p.nombre} ${p.codigo} ${p.cliente}`.toLowerCase().includes(s));
      if (state.filtroEstado) out = out.filter(p => p.estado === state.filtroEstado);
      const sort = state.sort;
      out.sort((a,b) => {
        const dir = sort.startsWith('-') ? -1 : 1;
        const key = sort.replace('-', '');
        const va = a[key]; const vb = b[key];
        if (key === 'fechaLimite') return (new Date(va) - new Date(vb)) * dir;
        if (typeof va === 'string') return va.localeCompare(vb) * dir;
        return ((va||0) - (vb||0)) * dir;
      });
      if (sort==='-createdAt') out.sort((a,b)=> (b.createdAt - a.createdAt));
      return out;
    }

    function render(){
      const tbody = qs('#tabla tbody');
      const list = applyFilters(Store.all());
      qs('#count').textContent = `${list.length} proyecto(s)`;
      tbody.innerHTML = list.map(p => `
        <tr>
          <td style="font-weight:700">${p.nombre}</td>
          <td>${p.codigo}</td>
          <td>${p.cliente}</td>
          <td>
            <div style="display:flex; align-items:center; gap:.6rem">
              <div style="width:90px;height:6px;background:var(--border-color);border-radius:3px;overflow:hidden">
                <div style="height:100%;width:${p.progreso||0}%;background:var(--primary-color)"></div>
              </div>
              <span>${p.progreso||0}%</span>
            </div>
          </td>
          <td>${badge(p.estado)}</td>
          <td>${formatDate(p.fechaLimite)}</td>
          <td>${formatMoney(p.presupuesto)}</td>
          <td class="actions">
            <button class="icon-btn icon-edit" title="Editar" onclick="onEdit('${p.id}')">‚úèÔ∏è</button>
            <button class="icon-btn icon-del" title="Eliminar" onclick="onDelete('${p.id}')">üóëÔ∏è</button>
          </td>
        </tr>
      `).join('');
    }

    // ===== MODAL =====
    const backdrop = qs('#backdrop');
    const modal = qs('#modal');
    function openModal(title='Nuevo Proyecto'){
      qs('#modalTitle').textContent = title;
      backdrop.style.display = 'flex';
      requestAnimationFrame(()=> modal.classList.add('open'));
    }
    function closeModal(){
      modal.classList.remove('open');
      setTimeout(()=> backdrop.style.display='none', 150);
      qs('#formProyecto').reset();
      state.editingId = null;
    }

    // ===== CRUD EVENTS =====
    function onEdit(id){
      const p = Store.all().find(x => x.id === id);
      if(!p) return;
      state.editingId = id;
      const f = qs('#formProyecto');
      f.nombre.value = p.nombre;
      f.codigo.value = p.codigo;
      f.cliente.value = p.cliente;
      f.estado.value = p.estado;
      f.progreso.value = p.progreso;
      f.presupuesto.value = p.presupuesto;
      f.fechaLimite.value = p.fechaLimite;
      f.descripcion.value = p.descripcion || '';
      openModal('Editar Proyecto');
    }

    function onDelete(id){
      const p = Store.all().find(x => x.id === id);
      if(!p) return;
      const ok = confirm(`¬øEliminar "${p.nombre}"? Esta acci√≥n no se puede deshacer.`);
      if(!ok) return;
      Store.remove(id);
      Toast.show('Proyecto eliminado correctamente.', 'success', 'Eliminado');
      render();
    }

    // ===== INIT & LISTENERS =====
    function init(){
      Store.seedIfEmpty();
      render();

      // Toolbar
      qs('#btnNuevo').addEventListener('click', () => openModal('Nuevo Proyecto'));
      qs('#inputSearch').addEventListener('input', e => { state.search = e.target.value; render(); });
      qs('#filterEstado').addEventListener('change', e => { state.filtroEstado = e.target.value; render(); });
      qs('#sortBy').addEventListener('change', e => { state.sort = e.target.value; render(); });

      // Export/Import
      qs('#btnExport').addEventListener('click', () => {
        const data = JSON.stringify(Store.all(), null, 2);
        const blob = new Blob([data], {type:'application/json'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `proyectos_${Date.now()}.json`;
        a.click();
      });
      qs('#btnImport').addEventListener('click', () => qs('#fileImport').click());
      qs('#fileImport').addEventListener('change', async (e) => {
        const file = e.target.files[0]; if(!file) return;
        const text = await file.text();
        try { const arr = JSON.parse(text); if(!Array.isArray(arr)) throw new Error('Formato no v√°lido');
          Store.save(arr); Toast.show('Proyectos importados con √©xito','success','Importaci√≥n'); render();
        } catch(err){ Toast.show('No se pudo importar: '+err.message, 'error', 'Error'); }
        e.target.value = '';
      });

      // Modal
      qs('#btnClose').addEventListener('click', closeModal);
      qs('#btnCancel').addEventListener('click', closeModal);
      backdrop.addEventListener('click', (e) => { if(e.target === backdrop) closeModal(); });

      // Submit
      qs('#formProyecto').addEventListener('submit', (e) => {
        e.preventDefault();
        const f = e.target;
        // Validaciones b√°sicas
        const prog = Number(f.progreso.value);
        if (prog < 0 || prog > 100) { Toast.show('El progreso debe estar entre 0 y 100.','warn','Validaci√≥n'); return; }

        const payload = {
          id: state.editingId || crypto.randomUUID(),
          nombre: f.nombre.value.trim(),
          codigo: f.codigo.value.trim(),
          cliente: f.cliente.value.trim(),
          estado: f.estado.value,
          progreso: Number(f.progreso.value || 0),
          presupuesto: Number(f.presupuesto.value || 0),
          fechaLimite: f.fechaLimite.value,
          descripcion: f.descripcion.value.trim(),
          createdAt: state.editingId ? (Store.all().find(x=>x.id===state.editingId)?.createdAt || Date.now()) : Date.now()
        };

        // Simular colisi√≥n de c√≥digo (√∫nico)
        const dup = Store.all().some(x => x.codigo.toLowerCase() === payload.codigo.toLowerCase() && x.id !== payload.id);
        if (dup) { Toast.show('Ya existe un proyecto con ese c√≥digo.', 'warn', 'Duplicado'); return; }

        Store.upsert(payload);
        closeModal();
        Toast.show(state.editingId ? 'Proyecto actualizado.' : 'Proyecto creado.', 'success', 'Guardado');
        render();
      });
    }

    // ===== API HOOK (reemplazo f√°cil) =====
    // Si luego quieres conectar a Flask/Express:
    // - Reemplaza las llamadas Store.* por fetch('/api/proyectos', { ... })
    // - Mant√©n el mismo shape de objeto para minimizar cambios en la UI.

    document.addEventListener('DOMContentLoaded', init);

    // Make helpers global for inline handlers
    window.onEdit = onEdit;
    window.onDelete = onDelete;
  </script>
</body>
</html>
